# Feature Specification: AI智能文案助手小程序

**Feature Branch**: `001-ai-copywriting-mini-app`  
**Created**: 2025-11-05  
**Status**: Draft  
**Input**: User description: "AI智能文案助手小程序 - 需求文档"

## Clarifications

### Session 2025-11-05

- Q: 具体的情绪表达方式类型 → A: 选项C - 专业化分类方案（热情洋溢、专业严谨、轻松幽默、温柔亲和、简洁直接）
- Q: 情绪风格功能的可用性范围 → A: 选项B - 所有用户免费使用（包括免费用户），作为核心差异化功能提升产品体验
- Q: 历史记录中是否展示情绪风格 → A: 是，在历史记录列表和详情页中显示情绪风格标签，便于用户识别和复用特定风格的文案
- Q: 每个场景的情绪风格是否统一 → A: 是，所有12个场景都使用统一的5种情绪风格，保持体验一致性，但每个场景可设置不同的默认风格
- Q: 情绪风格选择器的UI形式 → A: 使用水平排列的标签按钮组，让5种风格选项一目了然，支持快速切换，符合移动端交互习惯
- Q: 用户反馈渠道需求 → A: 添加用户反馈功能，支持用户建议新的情绪风格、文案场景等，包含反馈提交、状态跟踪、官方回复等完整流程

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 快速生成单条营销文案 (Priority: P1)

作为一名小红书博主，我想要快速生成适合小红书平台风格的文案，以便提高我的内容创作效率和发布频率。

**Why this priority**: 这是产品的核心价值主张，提供即时的文案生成能力。单一场景的文案生成可以独立验证AI生成质量和用户体验，是MVP的基础。

**Independent Test**: 用户选择"小红书爆款文案"场景，输入产品关键词（如"口红推荐"），系统生成文案并支持一键复制，整个流程在30秒内完成。

**Acceptance Scenarios**:

1. **Given** 用户进入小程序首页，**When** 用户点击"小红书爆款文案"场景卡片，**Then** 系统显示该场景的输入表单
2. **Given** 用户在表单中输入关键信息（产品名称、特点、目标用户），**When** 用户看到情绪风格选择器，**Then** 可以从5种风格中选择一种（热情洋溢、专业严谨、轻松幽默、温柔亲和、简洁直接），默认为"热情洋溢"
3. **Given** 用户选择了特定的情绪风格（如"轻松幽默"），**When** 用户点击"生成文案"按钮，**Then** 系统在5秒内生成符合该情绪风格的文案内容
4. **Given** 文案已生成，**When** 用户点击"复制"按钮，**Then** 文案被复制到剪贴板并提示"复制成功"
5. **Given** 用户对生成的文案不满意，**When** 用户点击"重新生成"按钮，**Then** 系统保持当前选择的情绪风格并生成新的文案内容
6. **Given** 用户对当前情绪风格的文案不满意，**When** 用户切换到不同的情绪风格（如从"热情洋溢"切换到"专业严谨"）并点击"生成文案"，**Then** 系统生成新风格的文案内容

---

### User Story 2 - 使用多种文案场景 (Priority: P1)

作为一名电商运营人员，我需要为不同平台和用途生成不同风格的文案（商品详情、朋友圈、直播话术等），以满足我的多样化营销需求。

**Why this priority**: 多场景支持是产品的差异化优势，让用户在一个工具内解决多种文案需求，提高用户粘性。这也是核心功能的自然延伸。

**Independent Test**: 用户可以在不同场景间切换（如从"商品详情页"切换到"朋友圈营销文案"），每个场景都能独立生成相应风格的文案。

**Acceptance Scenarios**:

1. **Given** 用户在首页，**When** 浏览场景列表，**Then** 可以看到至少12个不同的文案场景分类
2. **Given** 用户选择任一场景，**When** 进入该场景，**Then** 系统显示针对该场景优化的输入字段（如"抖音短视频脚本"需要输入时长、主题、风格）
3. **Given** 用户在A场景生成文案后，**When** 返回首页并选择B场景，**Then** 系统保留A场景的历史记录，同时开始新的B场景生成流程
4. **Given** 不同场景的输入字段，**When** 用户填写并生成，**Then** 生成的文案风格和格式符合对应场景的特征

---

### User Story 3 - 选择情绪风格生成个性化文案 (Priority: P1)

作为营销人员，我希望能够为同一内容选择不同的情绪表达风格（如热情、专业、幽默等），以匹配不同的目标受众和传播场景。

**Why this priority**: 情绪风格是产品的核心差异化功能，让用户能够快速获得多种表达方式的文案，大幅提升内容创作的灵活性和效率。这是MVP的关键竞争力。

**Independent Test**: 用户在任何场景中都能看到5种情绪风格选项，切换风格后生成的文案明显体现不同的语气和表达方式。

**Acceptance Scenarios**:

1. **Given** 用户进入任一文案生成场景，**When** 查看输入表单，**Then** 看到水平排列的5个情绪风格标签（热情洋溢、专业严谨、轻松幽默、温柔亲和、简洁直接），其中一个为选中状态（默认风格）
2. **Given** 用户查看情绪风格选择器，**When** 点击不同的风格标签，**Then** 该标签变为选中状态，之前选中的标签恢复默认样式
3. **Given** 用户选择"热情洋溢"风格生成文案，**When** 切换到"专业严谨"风格并重新生成，**Then** 新生成的文案语气更加正式、客观，用词更加专业
4. **Given** 用户在小红书场景使用"轻松幽默"风格，**When** 切换到招聘JD场景，**Then** 情绪风格自动重置为招聘JD的默认风格"专业严谨"
5. **Given** 用户已选择特定情绪风格并生成文案，**When** 点击"重新生成"，**Then** 系统使用相同的情绪风格生成新文案，无需重新选择
6. **Given** 免费用户使用情绪风格功能，**When** 生成文案，**Then** 不会遇到任何付费提示或功能限制

---

### User Story 4 - 管理使用次数和会员权益 (Priority: P1)

作为免费用户，我想要清楚了解我的剩余使用次数，并在需要时升级会员，以避免使用限制影响我的工作。

**Why this priority**: 会员体系是产品的核心变现模式，必须在MVP阶段实现。清晰的次数显示和购买入口直接影响转化率。

**Independent Test**: 免费用户可以看到每日剩余次数，达到限制时看到升级提示，点击后可完成会员购买。

**Acceptance Scenarios**:

1. **Given** 用户首次使用小程序，**When** 进入首页，**Then** 顶部显示"今日剩余次数：20/20"
2. **Given** 用户生成一次文案，**When** 返回首页，**Then** 显示的剩余次数减1
3. **Given** 免费用户当日已用完20次，**When** 尝试再次生成，**Then** 弹出会员购买引导页，显示各档会员价格和权益对比
4. **Given** 用户在引导页，**When** 选择月会员/年会员并完成支付，**Then** 系统立即解除次数限制并显示会员身份标识
5. **Given** 次日0点，**When** 用户打开小程序，**Then** 免费用户的每日次数重置为20次

---

### User Story 5 - 编辑和调整生成的文案 (Priority: P2)

作为内容创作者，我希望能够在AI生成的文案基础上进行微调和个性化编辑，以确保文案符合我的品牌调性和个人风格。

**Why this priority**: 提供编辑能力让用户对内容有更多控制权，提升文案的实用性和满意度。这是提升用户体验的重要功能，但不是最小可用产品的必要条件。

**Independent Test**: 在任何场景生成文案后，用户可以点击"编辑"按钮进入编辑模式，修改文案内容并保存。

**Acceptance Scenarios**:

1. **Given** 文案已生成，**When** 用户点击"编辑"按钮，**Then** 文案变为可编辑状态
2. **Given** 文案处于编辑状态，**When** 用户修改内容并点击"保存"，**Then** 编辑后的文案替换原文案
3. **Given** 用户正在编辑，**When** 点击"取消"或返回，**Then** 恢复到编辑前的文案内容
4. **Given** 编辑后的文案，**When** 用户点击"复制"，**Then** 复制的是编辑后的版本

---

### User Story 6 - 按次付费使用 (Priority: P2)

作为偶尔需要生成文案的用户，我希望在不购买会员的情况下，可以按需购买单次使用权，以灵活控制成本。

**Why this priority**: 为低频用户提供灵活的付费选项，降低使用门槛，扩大用户覆盖面。这是变现模式的补充，不是MVP的必要功能。

**Independent Test**: 免费次数用完后，用户可选择支付0.5元获得1次使用权，完成支付后立即可以生成文案。

**Acceptance Scenarios**:

1. **Given** 免费用户已用完每日次数，**When** 在引导页选择"按次购买"选项，**Then** 显示"0.5元/次"的购买按钮
2. **Given** 用户点击"按次购买"，**When** 完成微信支付，**Then** 系统增加1次可用次数且不影响次日的免费次数重置
3. **Given** 购买的单次使用权，**When** 用户在当日未使用完，**Then** 次日这些购买的次数仍然有效（不过期）

---

### User Story 7 - 查看文案生成历史 (Priority: P3)

作为经常使用的用户，我希望能查看我之前生成过的文案记录，以便复用或参考历史内容。

**Why this priority**: 提升用户体验和留存率，让用户感受到产品的持续价值。这是增强功能，可在后续版本迭代。

**Independent Test**: 用户可以进入"我的历史"页面，查看按时间倒序排列的历史文案记录，点击任意记录可查看详情并复制。

**Acceptance Scenarios**:

1. **Given** 用户已生成过文案，**When** 点击底部"历史记录"标签，**Then** 显示所有历史生成的文案列表，每条记录显示情绪风格标签（如"热情洋溢"）
2. **Given** 历史记录列表，**When** 用户点击某条记录，**Then** 显示该文案的完整内容、生成时间、对应场景和使用的情绪风格
3. **Given** 查看历史文案详情，**When** 点击"再次使用"，**Then** 直接进入对应场景并预填之前的输入信息和情绪风格选择

---

### User Story 8 - 提交反馈和建议新功能 (Priority: P2)

作为产品的活跃用户，我希望能够向产品团队提交反馈和建议（如建议添加新的情绪风格、新的文案场景等），让产品能够根据我的需求持续改进。

**Why this priority**: 用户反馈是产品迭代的重要来源，特别是对于情绪风格这类高度依赖用户偏好的功能。建立反馈渠道能够提高用户参与感和满意度，同时为产品优化提供数据支持。

**Independent Test**: 用户可以在小程序中找到反馈入口，提交对新情绪风格的建议或其他功能建议，系统记录反馈并给予确认。

**Acceptance Scenarios**:

1. **Given** 用户在使用小程序，**When** 点击"我的"或设置页面，**Then** 可以看到"意见反馈"入口
2. **Given** 用户进入反馈页面，**When** 查看反馈类型选项，**Then** 可以看到"建议新增情绪风格"、"建议新增文案场景"、"功能建议"、"问题反馈"等分类
3. **Given** 用户选择"建议新增情绪风格"，**When** 填写建议的风格名称和描述（如"励志激昂"风格），**Then** 可以输入最多200字的文字说明
4. **Given** 用户填写完反馈内容，**When** 点击"提交"按钮，**Then** 系统提示"感谢您的反馈，我们会认真考虑！"并记录反馈
5. **Given** 用户提交过反馈，**When** 进入"我的反馈"页面，**Then** 可以查看自己提交的历史反馈及状态（已提交/处理中/已采纳/已回复）
6. **Given** 用户的建议被采纳，**When** 查看反馈详情，**Then** 看到官方回复和预计上线时间
7. **Given** 在情绪风格选择器旁边，**When** 用户点击"建议新风格"快捷入口，**Then** 直接跳转到反馈页面并自动选中"建议新增情绪风格"类型

---

### User Story 9 - 企业用户批量生成和定制模板 (Priority: P3)

作为企业营销团队负责人，我希望能为团队定制专属的文案模板，并支持批量生成，以提高团队协作效率。

**Why this priority**: 这是面向B端的高价值功能，但需要在C端产品成熟后再开发。属于企业定制服务的一部分。

**Independent Test**: 企业管理员可以创建自定义模板（如公司特定产品线的文案模板），团队成员可以使用这些模板进行批量生成。

**Acceptance Scenarios**:

1. **Given** 企业管理员登录，**When** 进入"企业管理"模块，**Then** 可以创建自定义场景模板
2. **Given** 自定义模板已创建，**When** 团队成员登录，**Then** 在场景列表中可以看到企业专属模板
3. **Given** 企业用户上传包含多个产品的表格，**When** 选择批量生成，**Then** 系统为每个产品生成对应文案并支持批量导出

---

### Edge Cases

- **用户在生成过程中网络中断**：系统应保存用户输入的信息，恢复网络后允许重试，不消耗使用次数
- **AI生成失败或返回不当内容**：系统应提示"生成失败，请重试"，不消耗用户次数，并记录日志供人工审核
- **用户在会员到期时刻生成文案**：系统应以操作发起时的会员状态为准，不应在生成过程中因到期而失败
- **用户同时在多个设备登录**：系统应同步使用次数，避免超额使用，同时保证历史记录在所有设备一致
- **支付成功但系统未及时更新会员状态**：应有补偿机制，用户可通过"恢复购买"功能手动同步
- **文案内容过长超出平台限制**：系统应在生成前告知用户目标平台的字数限制，生成的文案应符合该限制
- **未成年用户使用**：虽然主要面向成年专业用户，但应符合微信小程序的内容规范和实名认证要求
- **用户切换情绪风格后未点击生成**：如果用户在某个场景更改了情绪风格但未生成文案就离开，下次进入该场景时应恢复为该场景的默认风格
- **不同场景使用不同情绪风格**：用户在A场景选择"热情洋溢"，切换到B场景时应显示B场景的默认风格，而非A场景的选择
- **用户提交空白或无效反馈**：系统应验证反馈内容不为空且至少包含5个字符，否则提示"请输入有效的反馈内容"
- **用户重复提交相同反馈**：系统应允许但记录为独立反馈，可在后台识别并合并处理
- **反馈内容包含敏感词或违规内容**：系统应进行基本内容审核，过滤明显违规内容，必要时不予提交并提示用户

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 系统必须提供至少12个不同的文案生成场景，每个场景针对特定平台或用途（小红书、抖音、商品详情、朋友圈、招聘JD、活动策划、公众号标题、直播话术、短信营销、邮件营销、新闻稿、产品宣传）
- **FR-002**: 每个场景必须有定制化的输入字段，引导用户提供必要的关键信息（如产品名称、特点、目标用户、风格偏好等）
- **FR-003**: 系统必须在用户提交输入后5秒内生成至少1条文案内容
- **FR-004**: 生成的文案必须支持一键复制到剪贴板功能
- **FR-005**: 用户必须能够对已生成的文案进行重新生成（不满意时获取新内容）
- **FR-006**: 系统必须支持对生成文案的在线编辑和修改
- **FR-007**: 系统必须为新用户提供每日20次免费生成额度，每日0点重置
- **FR-008**: 系统必须在显著位置实时展示用户当前剩余的可用次数
- **FR-009**: 系统必须提供月会员（29.9元/月，每日50次）和年会员（199元/年，无限次）两种订阅选项
- **FR-010**: 系统必须支持按次付费（0.5元/次），购买的次数不过期且不影响每日免费额度
- **FR-011**: 系统必须集成微信支付功能完成会员购买和按次购买
- **FR-012**: 当用户达到使用次数限制时，系统必须引导用户查看会员购买选项
- **FR-013**: 系统必须记录用户生成的文案历史，支持按时间倒序查看
- **FR-014**: 系统必须在历史记录中保存生成时的场景类型、输入信息和生成时间
- **FR-015**: 用户必须能够从历史记录快速复用之前的输入信息重新生成文案
- **FR-016**: 系统必须对生成的文案进行内容安全审核，过滤违规和敏感内容
- **FR-017**: 系统必须在生成失败或发生错误时不扣除用户的使用次数
- **FR-018**: 系统必须支持用户在多设备间同步账户信息、会员状态和使用次数
- **FR-019** *(V1.1功能)*: 系统应为免费用户在适当位置展示流量主广告（不影响核心功能使用）
- **FR-020** *(V1.1功能)*: 系统应提供企业定制服务的申请入口和联系方式
- **FR-021**: 系统必须为所有文案生成场景提供5种情绪表达风格选择：热情洋溢、专业严谨、轻松幽默、温柔亲和、简洁直接
- **FR-022**: 系统必须在生成文案时根据用户选择的情绪风格调整文案的语气、用词和表达方式
- **FR-023**: 系统必须为每个场景设置合理的默认情绪风格（如小红书默认"热情洋溢"、招聘JD默认"专业严谨"）
- **FR-024**: 用户在重新生成文案时，系统必须保持用户上次选择的情绪风格，除非用户主动更改
- **FR-025**: 情绪风格选择功能必须对所有用户（包括免费用户）开放，无需付费即可使用
- **FR-026**: 系统必须在历史记录列表中显示每条文案使用的情绪风格标签
- **FR-027**: 用户从历史记录"再次使用"功能时，系统必须恢复该条记录对应的情绪风格选择
- **FR-028**: 情绪风格选择器必须以水平排列的标签按钮组形式呈现，所有5个选项同时可见
- **FR-029**: 当用户切换场景时，情绪风格选择应重置为新场景的默认风格，而非保留上一场景的选择
- **FR-030**: 系统必须在文案生成表单中明显位置展示情绪风格选择器，确保用户注意到此功能
- **FR-031**: 系统必须在"我的"或设置页面提供"意见反馈"入口
- **FR-032**: 反馈功能必须支持至少4种反馈类型：建议新增情绪风格、建议新增文案场景、功能建议、问题反馈
- **FR-033**: 用户提交反馈时必须能够输入最多200字的文字说明
- **FR-034**: 系统必须在用户提交反馈后显示感谢确认信息
- **FR-035**: 系统必须记录每条反馈的内容、类型、提交时间和用户标识
- **FR-036**: 用户必须能够查看自己提交的历史反馈记录
- **FR-037**: 系统必须为每条反馈维护状态（已提交/处理中/已采纳/已回复）
- **FR-038**: 系统必须支持对反馈进行官方回复，用户可以查看回复内容
- **FR-039**: 系统必须在情绪风格选择器附近提供"建议新风格"快捷入口，点击后自动跳转到反馈页面并选中对应类型

### Key Entities

- **用户账户（User Account）**: 代表使用小程序的个人或企业用户，关键属性包括用户身份标识（微信openid）、会员类型（免费/月会员/年会员）、会员到期时间、当日已使用次数、累计购买的额外次数
  
- **文案生成场景（Content Scenario）**: 代表不同类型的文案生成模板，关键属性包括场景名称、场景描述、所需输入字段配置、目标平台特征、生成提示词模板、默认情绪风格

- **情绪风格配置（Tone Style）**: 代表可选的文案表达风格类型，关键属性包括风格名称（热情洋溢、专业严谨、轻松幽默、温柔亲和、简洁直接）、风格描述、Prompt修饰符（用于调整AI生成语气）、显示排序、是否启用。此实体从数据库动态加载，支持后续扩展新风格

- **文案记录（Content Record）**: 代表每次文案生成的历史记录，关键属性包括生成时间、所属用户、使用的场景类型、用户输入的原始信息、生成的文案内容、是否被编辑过、使用的情绪风格

- **订单记录（Order Record）**: 代表用户的购买行为，关键属性包括订单号、用户标识、购买类型（月会员/年会员/按次购买）、支付金额、支付时间、订单状态（待支付/已支付/已退款）

- **使用配额（Usage Quota）**: 代表用户的可用次数管理，关键属性包括每日免费额度、已使用的免费次数、购买的额外次数余额、最后重置时间

- **用户反馈（User Feedback）**: 代表用户提交的意见和建议，关键属性包括反馈ID、所属用户、反馈类型（建议新增情绪风格/建议新增文案场景/功能建议/问题反馈）、反馈内容、提交时间、反馈状态（已提交/处理中/已采纳/已回复）、官方回复内容、回复时间

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 用户从选择场景到成功复制文案的完整流程可在60秒内完成
- **SC-002**: 文案生成的响应时间在90%的情况下不超过5秒
- **SC-003**: 免费用户到付费会员的转化率达到8%以上
- **SC-004**: 用户对生成文案的满意度（首次生成即采用，不需重新生成）达到70%以上
- **SC-005**: 付费用户的7日留存率达到60%以上
- **SC-006**: 系统能够稳定支持500个并发用户同时生成文案
- **SC-007**: 用户平均每次会话生成3条以上文案（体现多场景使用价值）
- **SC-008**: 内容安全审核的误拦截率低于5%，漏放率低于1%
- **SC-009**: 支付成功率达到95%以上（排除用户主动取消）
- **SC-010**: 80%的用户在首次使用后24小时内再次打开小程序
- **SC-011**: 60%以上的用户在单次会话中尝试使用至少2种不同的情绪风格（体现功能价值）
- **SC-012**: 使用情绪风格功能的用户满意度比不使用的用户高15%以上
- **SC-013**: 每月至少收到20条有效用户反馈（体现用户参与度）
- **SC-014**: 80%以上的反馈在提交后48小时内更新状态为"处理中"或"已回复"
- **SC-015**: 被采纳的反馈建议在3个月内实现上线率达到50%以上
